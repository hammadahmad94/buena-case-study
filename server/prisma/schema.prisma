generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Property {
  id        String   @id @default(uuid())
  name      String
  type      String   // "WEG" or "MV"
  managerId String?
  manager   Manager? @relation(fields: [managerId], references: [id])
  accountantId String?
  accountant Accountant? @relation(fields: [accountantId], references: [id])
  
  buildings Building[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Building {
  id        String   @id @default(uuid())
  propertyId String
  property  Property @relation(fields: [propertyId], references: [id], onDelete: Cascade)
  
  street    String
  number    String
  zip       String
  city      String
  country   String?
  description String?
  
  units     Unit[]
}

model Unit {
  id        String   @id @default(uuid())
  buildingId String
  building  Building @relation(fields: [buildingId], references: [id], onDelete: Cascade)
  
  type      String   // "Apartment", "Office", "Garden", "Parking"
  number    String
  floor     Int
  entrance  String?
  rooms     Float
  size      Float    // sqm
  
  // WEG specific
  coOwnershipShare Float? 
  constructionYear Int?

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Manager {
  id    String @id @default(uuid())
  name  String
  email String
  properties Property[]
}

model Accountant {
  id    String @id @default(uuid())
  name  String
  email String
  properties Property[]
}
